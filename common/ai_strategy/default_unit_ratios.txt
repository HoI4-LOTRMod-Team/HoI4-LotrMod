



base_infantry = {
	enable = {
		always = yes
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = 100
	}
}

need_linefillers_1 = {
	enable = {
		ai_has_under_50p_wanted_divs = yes
		threat > 0.15
		has_equipment = { infantry_equipment < 8000 }
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = linefill
		value = 25
	}
}

need_linefillers_2 = {
	enable = {
		ai_has_under_25p_wanted_divs = yes
		threat > 0.01
		has_equipment = { infantry_equipment < 8000 }
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = linefill
		value = 25
	}
}

need_linefillers_3 = {
	enable = {
		has_war = yes
		ai_has_under_25p_wanted_divs = yes
		has_equipment = { infantry_equipment < 4000 }
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = linefill
		value = 50
	}
}

need_linefillers_4 = {
	enable = {
		has_war = yes
		enemies_strength_ratio > 1.0
		ai_has_under_50p_wanted_divs = yes
		has_equipment = { infantry_equipment < 8000 }
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = linefill
		value = 50
	}
}

need_linefillers_5 = {
	enable = {
		has_war = yes
		enemies_strength_ratio > 1.0
		ai_has_under_25p_wanted_divs = yes
		has_equipment = { infantry_equipment < 5000 }
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = linefill
		value = 100
	}
}

dont_build_pushers_if_too_weak = {
	enable = {
		num_of_military_factories < 13 # heavy cav and chariots need a good industry
		OR = {
			target_heavy_infantry_strat = no
			num_of_military_factories < 5
		}
		OR = {
			target_siege_machines_strat = no
			num_of_military_factories < 7
		}
		OR = {
			target_catapults_strat = no
			num_of_military_factories < 8
		}
		OR = {
			target_light_cav_strat = no
			num_of_military_factories < 9
		}
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = -10000
	}
}

can_build_pushers = {
	enable = {
		OR = {
			ai_wants_divisions > 20
			is_major = yes
		}
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 3
	}
}

can_build_pushers = {
	enable = {
		has_equipment = { infantry_equipment > 10000 }
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 5
	}
}

can_build_more_pushers = {
	enable = {
		ai_has_over_75p_wanted_divs = yes
		has_equipment = { infantry_equipment > 0 }
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 2
	}
}

can_build_more_pushers_2 = {
	enable = {
		num_of_military_factories > 40
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 6
	}
}

can_build_more_pushers_major = {
	enable = {
		is_major = yes
		ai_has_over_50p_wanted_divs = yes
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 2
	}
}

can_build_more_pushers_cheap = {
	enable = {
		ai_has_over_75p_wanted_divs = yes
		has_equipment = { infantry_equipment > 0 }
	}
	abort = {
		OR = {
			target_heavy_infantry_strat = no
			target_siege_machines_strat = no
			target_light_cav_strat = no
		}
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 5
	}
}

can_build_more_pushers_heavy_inf = {
	enable = {
		ai_has_over_25p_wanted_divs = yes
		has_equipment = { infantry_equipment > 0 }
	}
	abort = {
		target_heavy_infantry_strat = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 12
	}
}

can_build_more_pushers_siege_mach = {
	enable = {
		ai_has_over_50p_wanted_divs = yes
		has_equipment = { infantry_equipment > 0 }
	}
	abort = {
		target_siege_machines_strat = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 4
	}
}

mass_siege_engine_1 = {
	enable = {
		target_siege_machines_strat = yes
		ai_has_over_75p_wanted_divs = yes
		has_equipment = { infantry_equipment > 1000 }
		has_equipment = { siege_machine_chassis > 200 }
		num_of_military_factories > 45
	}
	abort = {
		target_siege_machines_strat = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 10
	}
}

mass_siege_engine_2 = {
	enable = {
		target_siege_machines_strat = yes
		ai_has_over_75p_wanted_divs = yes
		has_equipment = { infantry_equipment > 2000 }
		has_equipment = { siege_machine_chassis > 100 }
	}
	abort = {
		target_siege_machines_strat = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 20
	}
}

leftover_equipment_for_pushers = {
	enable = {
		has_equipment = { infantry_equipment > 0 }
		OR = {
			AND = {
				target_catapults_strat = yes
				has_equipment = { catapult_chassis > 200 }
			}
			AND = {
				target_siege_machines_strat = yes
				has_equipment = { siege_machine_chassis > 150 }
			}
			AND = {
				target_chariots_strat = yes
				has_equipment = { chariot_chassis > 500 }
			}
			AND = {
				target_heavy_cav_strat = yes
				has_equipment = { heavy_cavalry_chassis > 500 }
			}
			AND = {
				target_light_cav_strat = yes
				has_equipment = { light_cavalry_chassis > 500 }
			}
		}
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = push
		value = 8
	}
}

default_garrison_ports_lvl_0 = {
	enable = {
		enemies_naval_strength_ratio > 0.65
	}
	abort = {
		always = no
	}
	allowed = {
		any_controlled_state = {
			is_coastal = yes
		}
	}

	ai_strategy = {
		type = garrison
		value = 5
	}
}

default_garrison_ports_lvl_1 = {
	enable = {
		enemies_naval_strength_ratio > 0.85
		ai_has_over_75p_wanted_divs = yes
	}
	abort = {
		always = no
	}
	allowed = {
		any_controlled_state = {
			is_coastal = yes
		}
	}

	ai_strategy = {
		type = garrison
		value = 10
	}
}

default_garrison_ports_lvl_2 = {
	enable = {
		enemies_naval_strength_ratio > 1.0
		ai_has_over_100p_wanted_divs = yes
	}
	abort = {
		always = no
	}
	allowed = {
		any_controlled_state = {
			is_coastal = yes
		}
	}

	ai_strategy = {
		type = garrison
		value = 10
	}
}