


# is doing air focus
target_air_focus = {
	has_country_flag = gameplan_air_focus
}


# aim for 7-2 as our main infantry template
target_7_2_strat = {
	has_country_flag = gameplan_7_2_strat
}

# aim for 9-1 as our main infantry template
target_9_1_strat = {
	has_country_flag = gameplan_9_1_strat
}



# aim for any cavalry as our push divisions
target_any_cavalry_strat = {
	OR = {
		target_light_cav_strat = yes
		target_heavy_infantry_strat = yes
		target_heavy_cav_chariots_strat = yes
	}
}

# aim for light cav as our push divisions
target_light_cav_strat = {
	has_country_flag = gameplan_light_cav_strat
}

# aim for heavy cav as our push divisions
target_heavy_cav_strat = {
	has_country_flag = gameplan_heavy_cav_strat
}

# aim for heavy cav + chariots as our push divisions
target_heavy_cav_chariots_strat = {
	has_country_flag = gameplan_heavy_cav_chariots_strat
}

# aim for chariots as our push divisions
target_chariots_strat = {
	has_country_flag = gameplan_chariots_strat
}

# aim for catapults as our push divisions
target_catapults_strat = {
	has_country_flag = gameplan_catapults_strat
}

# aim for siege machines as our push divisions
target_siege_machines_strat = {
	has_country_flag = gameplan_siege_machines_strat
}

# aim for heavy infantry as our push divisions
target_heavy_infantry_strat = {
	has_country_flag = gameplan_heavy_infantry_strat
}





ai_wants_more_divisions = {
	check_variable = {
		ai_wants_divisions > num_divisions
	}
}


ai_has_under_25p_wanted_divs = {
set_temp_variable = { temp_divs = ai_wants_divisions }
	multiply_temp_variable = { temp_divs = 0.25 }
	check_variable = {
		temp_divs > num_divisions
	}
}

ai_has_under_50p_wanted_divs = {
	set_temp_variable = { temp_divs = ai_wants_divisions }
	multiply_temp_variable = { temp_divs = 0.5 }
	check_variable = {
		temp_divs > num_divisions
	}
}

ai_has_under_75p_wanted_divs = {
	set_temp_variable = { temp_divs = ai_wants_divisions }
	multiply_temp_variable = { temp_divs = 0.75 }
	check_variable = {
		temp_divs > num_divisions
	}
}

ai_has_under_100p_wanted_divs = {
	check_variable = {
		ai_wants_divisions > num_divisions
	}
}




ai_has_over_25p_wanted_divs = {
set_temp_variable = { temp_divs = ai_wants_divisions }
	multiply_temp_variable = { temp_divs = 0.25 }
	check_variable = {
		temp_divs < num_divisions
	}
}

ai_has_over_50p_wanted_divs = {
	set_temp_variable = { temp_divs = ai_wants_divisions }
	multiply_temp_variable = { temp_divs = 0.5 }
	check_variable = {
		temp_divs < num_divisions
	}
}

ai_has_over_75p_wanted_divs = {
	set_temp_variable = { temp_divs = ai_wants_divisions }
	multiply_temp_variable = { temp_divs = 0.75 }
	check_variable = {
		temp_divs < num_divisions
	}
}

ai_has_over_100p_wanted_divs = {
	check_variable = {
		ai_wants_divisions < num_divisions
	}
}


# should we use arty or support equipment in defcon 2 template?
ai_defcon_2_use_arty = {
	has_tech = interwar_artillery # can't use arty without the research
	OR = {
		# the immense priviledge of having string in our country
		tungsten > 7

		# we're rich enough to trade for string
		num_of_available_civilian_factories > 24

		# elves like bows
		#is_elves = yes # Ive toggled this out because elves all start with enough string anyway

		# We happen to have some spare arty
		#stockpile_ratio = {
		#	archetype = artillery_equipment
		#	ratio > 0.15
		#}

		# We have historically produced more arty
		check_variable = {
			total_equipment_produced_artillery > total_equipment_produced_support
		}

		# We don't have any rubber anyway
		rubber < 6
	}
}


ai_infantry_play_tall = {
	has_country_flag = ai_infantry_play_tall
}

ai_infantry_switch_to_tall_threshold = {
	num_of_available_civilian_factories > 20
	has_manpower > 20000
	OR = {
		AND = {
			ai_has_over_75p_wanted_divs = yes
			num_of_military_factories > 21
		}
		ai_has_over_100p_wanted_divs = yes
	}
	stockpile_ratio = {
		archetype = infantry_equipment
		ratio > 0.8
	}
	stockpile_ratio = {
		archetype = artillery_equipment
		ratio > 0.5
	}
	stockpile_ratio = {
		archetype = support_equipment
		ratio > 0.5
	}
}

ai_infantry_switch_to_wide_threshold = {
	OR = {
		ai_has_under_25p_wanted_divs = yes
		AND = {
			ai_has_under_75p_wanted_divs = yes
			has_equipment = { infantry_equipment < -1000 }
		}
		AND = {
			ai_has_under_100p_wanted_divs = yes
			has_equipment = { infantry_equipment < -5000 }
		}
		AND = {
			ai_has_under_50p_wanted_divs = yes
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.2
			}
			stockpile_ratio = {
				archetype = artillery_equipment
				ratio < 0.1
			}
			stockpile_ratio = {
				archetype = support_equipment
				ratio < 0.1
			}
		}
	}
}

ai_pushers_play_tall = {
	has_country_flag = ai_pushers_play_tall
}

ai_pushers_switch_to_tall_threshold = {
	OR = {
		AND = {
			ai_has_over_75p_wanted_divs = yes
			num_of_military_factories > 30
		}
		ai_has_over_100p_wanted_divs = yes
	}
	OR = {
		AND = {
			target_light_cav_strat = yes
			stockpile_ratio = {
				archetype = light_cavalry_chassis
				ratio > 0.4
			}
		}
		AND = {
			target_heavy_cav_strat = yes
			stockpile_ratio = {
				archetype = heavy_cavalry_chassis
				ratio > 0.4
			}
		}
		AND = {
			target_chariots_strat = yes
			stockpile_ratio = {
				archetype = chariot_chassis
				ratio > 0.4
			}
		}
		AND = {
			target_heavy_cav_chariots_strat = yes
			stockpile_ratio = {
				archetype = heavy_cavalry_chassis
				ratio > 0.4
			}
			stockpile_ratio = {
				archetype = chariot_chassis
				ratio > 0.4
			}
		}
	}
}

ai_pushers_switch_to_wide_threshold = {
	OR = {
		ai_has_under_25p_wanted_divs = yes
		AND = {
			ai_has_under_75p_wanted_divs = yes
			has_equipment = { infantry_equipment < -1000 }
		}
		AND = {
			ai_has_under_100p_wanted_divs = yes
			has_equipment = { infantry_equipment < -5000 }
		}
		AND = {
			ai_has_under_50p_wanted_divs = yes
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.2
			}
			stockpile_ratio = {
				archetype = artillery_equipment
				ratio < 0.1
			}
			stockpile_ratio = {
				archetype = support_equipment
				ratio < 0.1
			}
		}
	}
}