lothlorien_influence_decisions_category = {

	# TODO: Give these things some CD or something

	preemptivedepartures_nandor = {
		icon = generic_research

		available = {
			is_ai = no
			is_debug = yes
		}

		visible = {
			has_completed_focus = lth_preemtptivedepartures
		}

		fire_only_once = no
		cost = 0

		complete_effect = {
			random_character = {
				limit = {
					is_advisor = yes
					# Don't retire the big boys
					NOT = { is_character = LTH_celeborn }
					NOT = { is_character = LTH_galadriel }
					NOT = { is_character = LTH_haldir }

					OR = {
						has_trait = nandor_minor
						has_trait = nandor_intermediate
						has_trait = nandor_major
					}
				}

				LTH = {
					retire_character = PREV
				}
			}

			add_manpower = -5000

			lthi_decrease_influence_nandor_major = yes
		}
	}

	preemptivedepartures_noldor = {
		icon = generic_research

		available = {
			is_ai = no
			is_debug = yes
		}

		visible = {
			has_completed_focus = lth_preemtptivedepartures
		}

		fire_only_once = no
		cost = 0

		complete_effect = {
			random_character = {
				limit = {
					is_advisor = yes
					# Don't retire the big boys
					NOT = { is_character = LTH_celeborn }
					NOT = { is_character = LTH_galadriel }
					NOT = { is_character = LTH_haldir }

					OR = {
						has_trait = noldor_minor
						has_trait = noldor_intermediate
						has_trait = noldor_major
					}
				}

				LTH = {
					retire_character = PREV
				}
			}

			add_manpower = -5000

			lthi_decrease_influence_noldor_major = yes
		}
	}

	preemptivedepartures_sindar = {
		icon = generic_research

		available = {
			is_ai = no
			is_debug = yes
		}

		visible = {
			has_completed_focus = lth_preemtptivedepartures
		}

		fire_only_once = no
		cost = 0

		complete_effect = {
			random_character = {
				limit = {
					is_advisor = yes
					# Don't retire the big boys
					NOT = { is_character = LTH_celeborn }
					NOT = { is_character = LTH_galadriel }
					NOT = { is_character = LTH_haldir }

					OR = {
						has_trait = sindar_minor
						has_trait = sindar_intermediate
						has_trait = sindar_major
					}
				}

				LTH = {
					retire_character = PREV
				}
			}

			add_manpower = -5000

			lthi_decrease_influence_sindar_major = yes
		}
	}

	preemptivedepartures_halfelves = {
		icon = generic_research

		available = {
			is_ai = no
			is_debug = yes
		}

		visible = {
			has_completed_focus = lth_preemtptivedepartures
		}

		fire_only_once = no
		cost = 0

		complete_effect = {
			random_character = {
				limit = {
					is_advisor = yes
					# Don't retire the big boys
					NOT = { is_character = LTH_celeborn }
					NOT = { is_character = LTH_galadriel }
					NOT = { is_character = LTH_haldir }

					OR = {
						has_trait = halfelves_minor
						has_trait = halfelves_intermediate
						has_trait = halfelves_major
					}
				}

				LTH = {
					retire_character = PREV
				}
			}

			add_manpower = -5000

			lthi_decrease_influence_halfelves_major = yes
		}
	}

	leaving_for_valinor = {
		icon = GFX_decision_generic_treasure

        available = {
			always = no
        }

		allowed = {
			always = no
		}

	    is_good = yes
	    days_mission_timeout = 60
	    selectable_mission = no
	    days_remove = 1

	    timeout_effect = {

	    	random_core_state = {
				add_manpower = -7000
			}
	    }
	}

}

# TODO
foreign_support = {
	support_mordor_enemy = {
		icon = generic_research

		available = {
			always = yes
		}

		target_root_trigger = {
	        has_completed_focus = lth_supportmordorsenemies
	    }

		target_trigger = {
			has_war_with = MOR
		}

		fire_only_once = yes
		cost = 150
		target_array = majors

		complete_effect = {
			# TODO: Send some stuff to FROM
		}
	}
}


operations = {
	raid_lothlorien = {
		allowed = {
			OR = {
				tag = MOC
				tag = DGU
			}
		}

		visible = {
			LTH = { is_elves = yes }
			exists = yes
		}

		cost = 50
		days_re_enable = 90

		ai_will_do = {
			factor = 2
			modifier = {
				factor = 0.5
				tag = MOC
				has_war_with = MOA
			}
			modifier = {
				factor = 4
				tag = DGU
			}
		}

		available = {
			always = yes
		}

		complete_effect = {
			add_manpower = -150
			random_list = {
				50 = {
					modifier = {
						add = -10
						tag = DGU
						LTH = { has_completed_focus = lth_thefortressofdolguldur }
					}
					modifier = {
						add = -20
						tag = DGU
						LTH = { has_completed_focus = lth_patrolsandriverwardens }
					}
					modifier = {
						add = -15
						tag = MOC
						LTH = { has_completed_focus = lth_theminesofmoria }
					}

					add_timed_idea = {
						idea = generic_three_civs
						days = 20
					}
					LTH = { country_event = lothlorien.22 }
				}
				50 = {

				}
			}
		}
	}
}
