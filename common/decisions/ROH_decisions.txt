
political_actions = {
	ROH_grima_wormtongue_move = {
        icon = GFX_decision_evil_dilomacy

		allowed = {
			tag = ROH
		}
		
		available = {
			always = no
        }

		activation = {
        	grima_wormtongue_is_hired = yes
    	}

	    cancel_trigger = {
	        grima_wormtongue_is_hired = no
	    }

	    is_good = no
	    days_mission_timeout = 7
	    selectable_mission = no
	    days_remove = 1

	    timeout_effect = {
			grima_make_move = yes
	    }
	}

	ROH_purge_grima_conspirors_small_council = {
        icon = GFX_decision_generic_army_1

		allowed = {
			tag = ROH
		}

		visible = {
			has_completed_focus = ROH_purge_grima_sympathizers
		}

		available = {
			# TODO: tooltip
			NOT = {
				has_country_flag = purge_action_blocked
			}
		}

		cost = 120
		fire_only_once = yes
		
		complete_effect = {
			set_country_flag = {
				flag = purge_action_blocked
				days = 120
			}
			if = {
				limit = { has_idea = ROH_anti_eorl_plot_3 }
				swap_ideas = {
					remove_idea = ROH_anti_eorl_plot_3
					add_idea = ROH_anti_eorl_plot_2
				}
			}
			else_if = {
				limit = { has_idea = ROH_anti_eorl_plot_2 }
				swap_ideas = {
					remove_idea = ROH_anti_eorl_plot_2
					add_idea = ROH_anti_eorl_plot_1
				}
			}
			else = {
				remove_ideas = ROH_anti_eorl_plot_1
			}

			if = { limit = { ROH_leocred = { is_hired_as_advisor = yes } } ROH_leocred = { retire = yes } }
			if = { limit = { ROH_fengel = { is_hired_as_advisor = yes } } ROH_fengel = { retire = yes } }
			if = { limit = { ROH_heostor = { is_hired_as_advisor = yes } } ROH_heostor = { retire = yes } }
			if = { limit = { ROH_widgelred = { is_hired_as_advisor = yes } } ROH_widgelred = { retire = yes } }
			if = { limit = { ROH_frumbold = { is_hired_as_advisor = yes } } ROH_frumbold = { retire = yes } }
		}
	}

	ROH_purge_grima_conspirors_council_of_study = {
        icon = GFX_decision_generic_army_1

		allowed = {
			tag = ROH
		}

		visible = {
			has_completed_focus = ROH_purge_grima_sympathizers
		}

		available = {
			# TODO: tooltip
			NOT = {
				has_country_flag = purge_action_blocked
			}
		}

		cost = 120
		fire_only_once = yes
		
		complete_effect = {
			set_country_flag = {
				flag = purge_action_blocked
				days = 120
			}
			if = {
				limit = { has_idea = ROH_anti_eorl_plot_3 }
				swap_ideas = {
					remove_idea = ROH_anti_eorl_plot_3
					add_idea = ROH_anti_eorl_plot_2
				}
			}
			else_if = {
				limit = { has_idea = ROH_anti_eorl_plot_2 }
				swap_ideas = {
					remove_idea = ROH_anti_eorl_plot_2
					add_idea = ROH_anti_eorl_plot_1
				}
			}
			else = {
				remove_ideas = ROH_anti_eorl_plot_1
			}

			if = { limit = { has_idea = shady_intellectual_idea_ROH } remove_ideas = shady_intellectual_idea_ROH }
			if = { limit = { has_idea = luxury_powerbroker_idea_ROH } remove_ideas = luxury_powerbroker_idea_ROH }
			if = { limit = { ROH_grimbeam = { is_hired_as_advisor = yes } } ROH_grimbeam = { retire = yes } }
			if = { limit = { has_idea = backroom_beneficiary_idea_ROH } remove_ideas = backroom_beneficiary_idea_ROH }
			if = { limit = { has_idea = rampant_plagiarizer_wrm_idea_ROH } remove_ideas = rampant_plagiarizer_wrm_idea_ROH }
			
		}
	}

	ROH_purge_grima_conspirors_war_council = {
        icon = GFX_decision_generic_army_1

		allowed = {
			tag = ROH
		}

		visible = {
			has_completed_focus = ROH_purge_grima_sympathizers
		}

		available = {
			# TODO: tooltip
			NOT = {
				has_country_flag = purge_action_blocked
			}
		}

		cost = 120
		fire_only_once = yes
		
		complete_effect = {
			set_country_flag = {
				flag = purge_action_blocked
				days = 120
			}
			if = {
				limit = { has_idea = ROH_anti_eorl_plot_3 }
				swap_ideas = {
					remove_idea = ROH_anti_eorl_plot_3
					add_idea = ROH_anti_eorl_plot_2
				}
			}
			else_if = {
				limit = { has_idea = ROH_anti_eorl_plot_2 }
				swap_ideas = {
					remove_idea = ROH_anti_eorl_plot_2
					add_idea = ROH_anti_eorl_plot_1
				}
			}
			else = {
				remove_ideas = ROH_anti_eorl_plot_1
			}

			if = { limit = { ROH_erkenor = { is_hired_as_advisor = yes } } ROH_erkenor = { retire = yes } }
			if = { limit = { ROH_freca = { is_hired_as_advisor = yes } } ROH_freca = { retire = yes } }
			if = { limit = { ROH_heoere = { is_hired_as_advisor = yes } } ROH_heoere = { retire = yes } }
			if = { limit = { ROH_herethain = { is_hired_as_advisor = yes } } ROH_herethain = { retire = yes } }
			if = { limit = { ROH_leoheort = { is_hired_as_advisor = yes } } ROH_leoheort = { retire = yes } }
			
		}
	}

	ROH_abolish_the_royal_guard = {
        icon = GFX_decision_generic_5

		allowed = {
			tag = ROH
		}

		available = {
			has_template = "Royal Guard"
		}

		cost = 120
		fire_only_once = yes
		
		complete_effect = {
			delete_unit_template_and_units = { division_template = "Royal Guard" }
		}
	}
}