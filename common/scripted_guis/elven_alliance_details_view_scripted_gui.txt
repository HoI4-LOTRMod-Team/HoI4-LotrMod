scripted_gui = {
	
	elven_alliance_details_scripted_gui = {
		context_type = player_context

		#parent_window_token = politics_tab
		window_name = "elven_alliance_details_container"

		properties = {
		    ea_resolution_special_icon = {
				image = "[GetSpecialEATypeSymbol]"
			}
		}

		triggers = {
			vote_in_favour_button_visible = { has_global_flag = ea_vote_in_progress }
			vote_against_button_visible = { has_global_flag = ea_vote_in_progress }
			abstain_button_visible = { has_global_flag = ea_vote_in_progress }
			vote_against_count_visible = { has_global_flag = ea_vote_in_progress }
			vote_in_favour_count_visible = { has_global_flag = ea_vote_in_progress }
			vote_in_favour_button_list_visible = { has_global_flag = ea_vote_in_progress }
			vote_against_button_list_visible = { has_global_flag = ea_vote_in_progress }
			abstain_button_list_visible = { has_global_flag = ea_vote_in_progress }

			memberlist_visible = { NOT = { has_global_flag = ea_vote_in_progress } }
			memberlist_bg_visible = { NOT = { has_global_flag = ea_vote_in_progress } }

			ea_resolution_trade_icon_visible = {
				has_global_flag = ea_trade_resolutions_unlocked
			}
			ea_resolution_peace_icon_visible = {
				has_global_flag = ea_peace_resolutions_unlocked
			}
			ea_resolution_research_icon_visible = {
				has_global_flag = ea_research_resolutions_unlocked
			}
			ea_resolution_special_icon_visible = {
				has_global_flag = ea_special_resolutions_unlocked
			}

			# TODO: Dont know if I'll need this
			ea_resolution_peace_icon_click_enabled = { always = yes }
			ea_resolution_trade_icon_click_enabled = { always = yes }
			ea_resolution_expansion_icon_click_enabled = { always = yes }
			ea_resolution_alliance_icon_click_enabled = { always = yes }
			ea_resolution_industry_icon_click_enabled = { always = yes }
			ea_resolution_research_icon_click_enabled = { always = yes }
			ea_resolution_special_icon_click_enabled = { always = yes }
        }

        effects = {
            vote_in_favour_button_click = {
				ROOT = {
					elven_alliance_vote_in_favour = yes
				}
			}

			vote_against_button_click = {
				ROOT = {
					elven_alliance_vote_against = yes
				}
			}

			abstain_button_click = {
				ROOT = {
					elven_alliance_abstain = yes
				}
			}

			resolution_passes_effect_click = {
				effect_tooltip = {
					elven_alliance_vote_effect = yes
				}
			}

			ea_resolution_alliance_icon_click = {
				effect_tooltip = {
					ea_resolution_alliance_current_tteffect = yes
					ea_resolution_alliance_next_tteffect = yes
				}
			}

			ea_resolution_industry_icon_click = {
				effect_tooltip = {
					ea_resolution_industry_current_tteffect = yes
					ea_resolution_industry_next_tteffect = yes
				}
			}

			ea_resolution_expansion_icon_click = {
				effect_tooltip = {
					ea_resolution_expansion_current_tteffect = yes
					ea_resolution_expansion_next_tteffect = yes
				}
			}

			ea_resolution_trade_icon_click = {
				effect_tooltip = {
					ea_resolution_trade_current_tteffect = yes
					ea_resolution_trade_next_tteffect = yes
				}
			}

			ea_resolution_peace_icon_click = {
				effect_tooltip = {
					ea_resolution_peace_current_tteffect = yes
					ea_resolution_peace_next_tteffect = yes
				}
			}

			ea_resolution_research_icon_click = {
				effect_tooltip = {
					ea_resolution_research_current_tteffect = yes
					ea_resolution_research_next_tteffect = yes
				}
			}

			ea_resolution_special_icon_click = {
				if = {
					limit = { has_global_flag = ea_type_hegemony }
					effect_tooltip = {
						ea_resolution_hegemony_current_tteffect = yes
						ea_resolution_hegemony_next_tteffect = yes
					}
				}
				else_if = {
					limit = { has_global_flag = ea_type_martial }
					effect_tooltip = {
						ea_resolution_martial_current_tteffect = yes
						ea_resolution_martial_next_tteffect = yes
					}
				}
				else_if = {
					limit = { has_global_flag = ea_type_union }
					effect_tooltip = {
						ea_resolution_union_current_tteffect = yes
						ea_resolution_union_next_tteffect = yes
					}
				}
			}

			close_click = {
				clr_country_flag = elven_alliance_details_view_open
			}

			help_click = {
				# TODO: Tutorial event
			}
        }

		ai_enabled = {
			always = no
		}
		
		visible = {
			is_ai = no
			has_country_flag = elven_alliance_details_view_open
		}
	}
}

